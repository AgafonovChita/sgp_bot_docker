![Postgres](https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white)
![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54)

________________________________________________________________
### Бот-администратор корпоративного телеграмм-канала
* Защита от несанкционированного доступа в канал
  - запрещено добавление пользователя напрямую одним из администраторов
  - запрещено добавление пользователя через любую ссылку-ссылку приглашение, кроме ссылки, созданной ботом
  - доступ в канал возможен только после прохождения регистрации через бота (При регистрации бот запрашивает ФИ, должность, номера телефона, привязанный к аккаунту)
* Данные обо всех подписчиках канала хранятся в БД(PostgreSQL) и дублируются в GoogleSheets через Google-API
* Функционал для проведения розыгрышей среди подписчиков (генерируется индивидуальный номер, данные участников записываются в GSheets)
* Функционал для рассылки поздравлений сотрудникам (дата приёма на работу вручную указывается в GSheets в соответствующее поле, открытки и тексты поздравлений вручную загружаются в бота)
* Вся статика (сообщения, стикеры) хранятся в отдельной папке templates и легко меняются под ваши особенности


________________________________________________________________
### УСТАНОВКА
- Установить <a href="https://docs.docker.com/">Docker</a> и <a href="https://docs.docker.com/compose/">Docker-compose</a>
- Клонировать репозиторий `git clone https://github.com/AgafonovSiberia/sgp_bot.git`
- Перейти в рабочую директорию <code>cd sgp_bot</code>
- Получить [GoogleServiceAccount](https://docs.gspread.org/en/latest/oauth2.html)
- Создать [Google-таблицу](https://www.google.ru/intl/ru/sheets/about/)
- Заменить <code>.env-example</code> на <code>.env_dev</code> и заполнить его
  * GSAPI_ID - Идентификатор созданной гугл-таблицы (можно скопировать из URL)
  * GSAPI_URL - Полный URL на вашу гугл-таблицу
  * GSAPI_SERVICE_KEY - Данные из JSON-ключа от сервисного аккаунта
- Запустить приложение командой <code>make run</code>

Чтобы остановить приложение <code>make stop</code>
Чтобы очистить volumes PostgreSQL и проинициализровать БД заного, предварительно (перед <code>make run</code>), выполнить команду <code>make clear_data</code>

________________________________________________________________

